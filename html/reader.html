<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>

    <link rel="stylesheet" type="text/css" href="../lib/infusion/framework/fss/css/fss-reset-global.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/infusion/framework/fss/css/fss-base-global.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/infusion/framework/fss/css/fss-text.css"/>
    <link rel="stylesheet" type="text/css" href="../lib/infusion/framework/fss/css/fss-layout.css"/>
    <!-- UI options -->

    <link rel="stylesheet" type="text/css" href="../lib/infusion/components/uiOptions/css/fss/fss-theme-bw-uio.css" />
    <link rel="stylesheet" type="text/css" href="../lib/infusion/components/uiOptions/css/fss/fss-theme-wb-uio.css" />
    <link rel="stylesheet" type="text/css" href="../lib/infusion/components/uiOptions/css/fss/fss-theme-by-uio.css" />
    <link rel="stylesheet" type="text/css" href="../lib/infusion/components/uiOptions/css/fss/fss-theme-yb-uio.css" />
    <link rel="stylesheet" type="text/css" href="../lib/infusion/components/uiOptions/css/fss/fss-text-uio.css" />
    <link rel="stylesheet" type="text/css" href="../lib/infusion/components/uiOptions/css/UIOptions.css" />
    <link rel="stylesheet" type="text/css" href="../lib/infusion/components/uiOptions/css/FullUIOptions.css" />
    <!-- ui options -->


    <script type="text/javascript" src="../lib/infusion/InfusionAll.js"></script>


    <!-- epubReader dependencies -->

    <link rel="stylesheet" href="../css/epubReaderUIOptions.css"/>
    <link rel="stylesheet" href="../css/epubReader.css"/>

    <script type="text/javascript" src="../lib/JSZip/jszip.js"></script>
    <script type="text/javascript" src="../lib/JSZip/jszip-load.js"></script>
    <script type="text/javascript" src="../lib/JSZip/jszip-deflate.js"></script>
    <script type="text/javascript" src="../lib/JSZip/jszip-inflate.js"></script>
    <script type="text/javascript" src="../js/epubUIOptions.js"></script>
    <script type="text/javascript" src="../js/epubReader.js"></script>


</head>
<body>

<div class='epubReaderContainer fl-container-auto' align="center">
    <div class="flc-uiOptions-optionPanel fl-uiOptions-optionPanel">

        <div id="epubUIOptions" class="flc-slidingPanel-panel"></div>

        <!--TODO temporary place holder for table of contents --->
        <div id="toc-container">
            <ol id="toc"></ol>
        </div>

        <div class="fl-panelBar">
            <button  id="uiOptions-button" class="flc-slidingPanel-toggleButton fl-toggleButton"></button>
            <button  id="toc-button" class="flc-slidingPanel-toggleButton fl-toggleButton" ></button>
        </div>
    </div>

    <h1 class="content-title"></h1>

    <div id="book" class="fl-container-800 rounded-corners centerAlign">
        <div id="total-size" align="left">
            <div id="remaining"></div>
        </div>
        <div id="chapter_style"></div>
        <div id="chapter_content" class="centerAlign"></div>
    </div>

</div>


<script type="text/javascript">

    // extended to include my custom UI option
    fluid.staticEnvironment.uiEnhancer = fluid.uiEnhancer("#book", {
        components: {
            pageMode: {
                type: "fluid.uiEnhancer.classSwapper",
                container: "{uiEnhancer}.container",
                options: {
                    classes: "{uiEnhancer}.options.classnameMap.pageMode"
                }
            },
            settingsStore: {
                options:{
                    defaultSiteSettings: {
                        pageMode: "split"
                    }
                }
            }
        },
        classnameMap: {
            "pageMode": {
                "split": "",
                "scroll": "fl-font-uio-times"
            }
        }
    });

    var temp = fluid.epubReader(".epubReaderContainer",{
        book:{
            epubPath : "../tests/epubs/carroll-alice-in-wonderland-illustrations.epub"
        },
        constraints :{
            maxImageHeight : 400,
            maxImageWidth : 300
        },
        selectors:{
            chapterContent: "#chapter_content"
        }
    });

    fluid.slidingPanel(".epubReaderContainer",{
        selectors: {
            panel: "#toc-container",
            toggleButton: "#toc-button"
        },
        hideByDefault: true,
        strings: {
            showText: "+ Index",
            hideText: "- Index"
        }
    });


</script>

</body>
</html>